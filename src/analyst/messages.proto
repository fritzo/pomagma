package pomagma_messaging;

message AnalystRequest {

  message Test {
  }
  message Simplify {
    repeated string codes = 1;
  }
  message BatchSimplify {
    required string codes_in = 1;
    required string codes_out = 2;
  }
  message Validate {
    repeated string codes = 1;
  }
  message ValidateCorpus {
    message Line {
      optional string name = 1;
      required string code = 2;
    }
    repeated Line lines = 1;
  }

  optional Test test = 1;
  optional Simplify simplify = 2;
  optional BatchSimplify batch_simplify = 3;
  optional Validate validate = 4;
  optional ValidateCorpus validate_corpus = 5;
}

message AnalystResponse {
  enum Trool {
    MAYBE = 0;
    FALSE = 1;
    TRUE = 2;
  }
  message Validity {
    required Trool is_top = 1 [default = MAYBE];
    required Trool is_bot = 2 [default = MAYBE];
  }

  message Test {
    required uint64 fail_count = 1;
  }
  message Simplify {
    repeated string codes = 1;
  }
  message BatchSimplify {
    required uint64 line_count = 1;
  }
  message Validate {
    repeated Validity results = 1;
  }
  message ValidateCorpus {
    repeated Validity results = 1;
  }

  optional Test test = 1;
  optional Simplify simplify = 2;
  optional BatchSimplify batch_simplify = 3;
  optional Validate validate = 4;
  optional ValidateCorpus validate_corpus = 5;

  repeated string error_log = 6;
}
