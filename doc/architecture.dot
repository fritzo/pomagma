digraph G {
    overlap=false;
    size="5,5";
    node [shape=box];


    //subgraph cluster_legend {
    //    rank="max";
    //    Human [style=filled, fillcolor=pink];
    //    Data [shape=ellipse];
    //}

    Theorist;
    Linguist;
    {
        rank="same";
        node [style=filled, fillcolor=pink];
        TheoryReviewer [label="Reviewer"];
        LanguagesReviewer [label="Reviewer"];
    }
    {
        node [shape=ellipse];
        Languages;
        Theory;
        Atlas;
        Corpus;
    }
    Compiler;
    {
        rank="same";
        Analyst;
        EditorServer [label="Editor\nServer"];
    }

    subgraph cluster_survey {
        Surveyor;

        color = "#666666";
        fontcolor = "#666666";
        label = "many";
        labelloc = "b";
    }

    subgraph cluster_edit {
        EditorClient [label="Editor\nClient"];
        Writer [style=filled, fillcolor=pink];

        color = "#666666";
        fontcolor = "#666666";
        label = "many";
        labelloc = "b";
    }

    { rank="min"; Linguist; Theorist; }
    { rank="same"; Languages; Theory; Atlas; Corpus; }
    { rank="same"; Cartographer; Compiler; Analyst; }


    // Workflow: Compile
    edge [dir=forward arrowhead=normal]; // pull
    Theory -> Compiler;
    Compiler -> Surveyor;
    Compiler -> Cartographer;

    // Workflow: Survey
    edge [dir=forward arrowhead=normal]; // pull
    Atlas -> Cartographer;
    Languages -> Cartographer;
    Languages -> Surveyor;
    Cartographer -> Surveyor;
    edge [dir=both arrowtail=inv arrowhead=empty]; // push
    Surveyor -> Cartographer;
    Cartographer -> Atlas;

    // Workflow: Edit
    edge [dir=forward arrowhead=normal]; // pull
    Atlas -> Analyst;
    Languages -> Analyst;
    Corpus -> Analyst;
    Corpus -> EditorServer;
    Analyst -> EditorServer;
    EditorServer -> EditorClient;
    EditorClient -> Writer;
    edge [dir=both arrowtail=inv arrowhead=empty]; // push
    Analyst -> Corpus;
    EditorServer -> Corpus;
    EditorClient -> EditorServer;
    Writer -> EditorClient;

    // Workflow: Fit Language
    edge [dir=forward arrowhead=normal]; // pull
    Corpus -> Linguist;
    Atlas -> Linguist;
    Languages -> Linguist;
    Linguist -> LanguagesReviewer;
    edge [dir=both arrowtail=inv arrowhead=empty]; // push
    Linguist -> Languages;
    LanguagesReviewer -> Languages;
    LanguagesReviewer -> Theory;

    // Workflow: Conjecture
    edge [dir=forward arrowhead=normal]; // pull
    Atlas -> Theorist;
    Languages ->  Theorist;
    Theorist -> TheoryReviewer;
    edge [dir=both arrowtail=inv arrowhead=empty]; // push
    TheoryReviewer -> Theory;
    Theorist -> Atlas;
}
