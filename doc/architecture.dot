digraph G {
	overlap=false;
	size="4,4";

	node [shape=box];

	//subgraph cluster_legend {
	//	rank = "min";
		Human [style=filled, fillcolor=pink];
	//	Process;
	//	Data [shape=ellipse];
	//	color = "#666666";
	//}

	{
		rank = "min";
	 	Theorist;
		Linguist;
	}

	{
		rank = "same";
		node [label="Reviewer", style=filled, fillcolor=pink];
		lang_reviewer;
		theory_reviewer;
	}

	{
	 	rank="same";
		Language [shape=ellipse];
		Theory [shape=ellipse];
		Structure [shape=ellipse];
	}

	{
		rank="same";
		Trimmer;
		Aggregator;
		Compiler;
		nav_server [label="Navigator\nServer"];
	}

	subgraph cluster_grower {
		Grower;

		color = "#666666";
		fontcolor = "#666666";
		label = "many";
		labelloc = "b";
	}

	subgraph cluster_navigator {
		rank="max";
		{ rank="max"; Player [style=filled, fillcolor=pink]; }
		nav_client [label="Navigator\nClient"];

		color = "#666666";
		fontcolor = "#666666";
		label = "many";
		labelloc = "b";
	}

	Structure -> Trimmer;
	Language -> Trimmer;
	Trimmer -> Grower;
	Grower -> Aggregator [label="queued"];
	Aggregator -> Structure;
	Structure -> Aggregator;

	Structure -> Theorist;
	Language ->  Theorist;
	Theorist -> theory_reviewer;
	theory_reviewer -> Theory;
	Theory -> Compiler -> Grower;

	Structure -> Linguist;
	Language -> Linguist;
	Linguist -> lang_reviewer -> Language;
	//Linguist -> Language [label="weights"];
	//Linguist -> lang_reviewer -> Language [label="rules"];

	nav_server [label="Navigator\nServer"];
	nav_client -> nav_server [label="pos"];
	nav_server -> nav_client [label="nbhd"];
	Structure -> nav_server;
	Language -> nav_server;
	nav_server -> Linguist [label="usage"];
	nav_client -> Player;
	Player -> nav_client;
}
